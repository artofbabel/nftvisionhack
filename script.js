const btn = document.querySelector('button'),
chunks = [];

function record() {
chunks.length = 0;
let stream = document.querySelector('canvas').captureStream(16),
  recorder = new MediaRecorder(stream, {
      videoBitsPerSecond : 80000000,
      mimeType : "video/webm", 
    }); 
recorder.ondataavailable = e => {
  if (e.data.size) {
    chunks.push(e.data);
  }
};
recorder.onstop = exportVideo;
btn.onclick = e => {
  recorder.stop();
  btn.textContent = 'start recording';
  btn.onclick = record;
};
recorder.start();
btn.textContent = 'stop recording';
}

function exportVideo(e) {
var blob = new Blob(chunks);
var vid = document.createElement('video');
vid.id = 'recorded'
vid.controls = true;
vid.src = URL.createObjectURL(blob);
document.body.appendChild(vid);
vid.play();
}
btn.onclick = record;

//Add sketch code below
function _0xab71(_0x2748ce,_0x16cfe7){const _0x3508e0=_0x5a13();return _0xab71=function(_0x4b3e00,_0x2d2cce){_0x4b3e00=_0x4b3e00-0x186;let _0x27082e=_0x3508e0[_0x4b3e00];return _0x27082e;},_0xab71(_0x2748ce,_0x16cfe7);}(function(_0x4818d1,_0x55d4a7){const _0x33af46=_0xab71,_0x59cfc2=_0x4818d1();while(!![]){try{const _0x3c32c8=-parseInt(_0x33af46(0x197))/0x1+parseInt(_0x33af46(0x191))/0x2*(-parseInt(_0x33af46(0x18c))/0x3)+-parseInt(_0x33af46(0x19b))/0x4*(parseInt(_0x33af46(0x18d))/0x5)+parseInt(_0x33af46(0x193))/0x6*(-parseInt(_0x33af46(0x189))/0x7)+-parseInt(_0x33af46(0x195))/0x8+parseInt(_0x33af46(0x199))/0x9*(-parseInt(_0x33af46(0x19a))/0xa)+-parseInt(_0x33af46(0x1a0))/0xb*(-parseInt(_0x33af46(0x18f))/0xc);if(_0x3c32c8===_0x55d4a7)break;else _0x59cfc2['push'](_0x59cfc2['shift']());}catch(_0x24e2d0){_0x59cfc2['push'](_0x59cfc2['shift']());}}}(_0x5a13,0xdb9c6));const _0x56dd7d=function(){let _0xda1baf=!![];return function(_0x546d50,_0x56896f){const _0xe0f0b2=_0xda1baf?function(){if(_0x56896f){const _0x523923=_0x56896f['apply'](_0x546d50,arguments);return _0x56896f=null,_0x523923;}}:function(){};return _0xda1baf=![],_0xe0f0b2;};}(),_0xa47bf7=_0x56dd7d(this,function(){const _0x40e68b=_0xab71;return _0xa47bf7[_0x40e68b(0x18a)]()[_0x40e68b(0x18b)]('(((.+)+)+)+$')[_0x40e68b(0x18a)]()[_0x40e68b(0x186)](_0xa47bf7)[_0x40e68b(0x18b)](_0x40e68b(0x1a1));});_0xa47bf7();const _0x2d2cce=function(){let _0x34380f=!![];return function(_0x2a0ecf,_0x4ee1bd){const _0x6323d=_0x34380f?function(){if(_0x4ee1bd){const _0x27991c=_0x4ee1bd['apply'](_0x2a0ecf,arguments);return _0x4ee1bd=null,_0x27991c;}}:function(){};return _0x34380f=![],_0x6323d;};}(),_0x4b3e00=_0x2d2cce(this,function(){const _0x428802=_0xab71;let _0x2f16ab;try{const _0x1dafe0=Function(_0x428802(0x1a2)+_0x428802(0x19d)+');');_0x2f16ab=_0x1dafe0();}catch(_0x290ab5){_0x2f16ab=window;}const _0x4db36b=_0x2f16ab[_0x428802(0x19f)]=_0x2f16ab['console']||{},_0x5c06ab=[_0x428802(0x19c),_0x428802(0x196),_0x428802(0x198),_0x428802(0x187),_0x428802(0x190),_0x428802(0x18e),_0x428802(0x19e)];for(let _0x3f0219=0x0;_0x3f0219<_0x5c06ab['length'];_0x3f0219++){const _0x42e651=_0x2d2cce['constructor']['prototype'][_0x428802(0x188)](_0x2d2cce),_0x52104a=_0x5c06ab[_0x3f0219],_0x227147=_0x4db36b[_0x52104a]||_0x42e651;_0x42e651[_0x428802(0x194)]=_0x2d2cce['bind'](_0x2d2cce),_0x42e651[_0x428802(0x18a)]=_0x227147[_0x428802(0x18a)][_0x428802(0x188)](_0x227147),_0x4db36b[_0x52104a]=_0x42e651;}});_0x4b3e00();function _0x5a13(){const _0x5dfd2f=['594KwBkUL','__proto__','8789448gBbDxU','warn','1775911ByEkyJ','info','8284167aMijpz','10UpUIlW','1039180WObWsd','log','{}.constructor(\x22return\x20this\x22)(\x20)','trace','console','68337247CfZHLm','(((.+)+)+)+$','return\x20(function()\x20','constructor','error','bind','64183CwPJpX','toString','search','54345sGwEnQ','10ZLQbxJ','table','12xsuSfC','exception','10VRjLcb','theta'];_0x5a13=function(){return _0x5dfd2f;};return _0x5a13();}let points=[];function setup(){createCanvas(windowWidth,windowHeight),noStroke();for(let _0x28c898=0xc;_0x28c898<0xc8;_0x28c898+=0xc){for(let _0x18a8ab=0x0;_0x18a8ab<_0x28c898/0x2;_0x18a8ab++){let _0x285357=map(_0x18a8ab,0x0,_0x28c898/0x2,0x0,TWO_PI);points['push']({'r':_0x28c898,'theta':_0x285357});}}}function draw(){const _0x3d8050=_0xab71;let _0x64196a=frameCount/0x19;blendMode(BLEND),background(0x0),blendMode(ADD),translate(width/0x2,height/0x2),rotate(PI/0x2);for(let _0x27295b of points){let _0x2266e8=map(_0x27295b['r'],0x64,0xc0,0x46,0x0);_0x27295b['r']<0x64&&(_0x2266e8=map(_0x27295b['r'],0xc,0x64,0x0,0x46));let _0x4b7628=cos(_0x27295b[_0x3d8050(0x192)]),_0x138f2b=sin(_0x27295b[_0x3d8050(0x192)]),_0x428246=_0x64196a+_0x27295b['r']/0x46;fill(0xff,0x0,0x0);let _0x34848c=cos(_0x428246)/0x2+0.5,_0x463cc3=_0x27295b['r']+_0x34848c*_0x2266e8;circle(_0x463cc3*_0x4b7628,_0x463cc3*_0x138f2b,0x5),fill(0x0,0xff,0x0),_0x34848c=cos(_0x428246+0.05)/0x2+0.5,_0x463cc3=_0x27295b['r']+_0x34848c*_0x2266e8,circle(_0x463cc3*_0x4b7628,_0x463cc3*_0x138f2b,0x5),fill(0x0,0x0,0xff),_0x34848c=cos(_0x428246+0.1)/0x2+0.5,_0x463cc3=_0x27295b['r']+_0x34848c*_0x2266e8,circle(_0x463cc3*_0x4b7628,_0x463cc3*_0x138f2b,0x5);}}
